==============================================================================
  WORKSHOP CEPH - TEST COMPLET DE TOUTES LES COMMANDES
  Date: Mon Jan  5 14:18:04 UTC 2026
==============================================================================

==============================================================================
  SECTION 0: VERIFICATION DE L'ENVIRONNEMENT
==============================================================================

>>> hostname
client

>>> ls /scripts/
total 128
drwxr-xr-x 12 root root   384 Jan  5 14:16 .
drwxr-xr-x  1 root root  4096 Jan  5 14:18 ..
-rwx--x--x  1 root root 13321 Jan  5 13:47 backup-restore.sh
-rwx--x--x  1 root root 11105 Jan  5 13:47 benchmark.sh
-rwx--x--x  1 root root  5683 Jan  5 13:38 ceph-health.sh
-rwx--x--x  1 root root 13382 Jan  5 13:38 ceph-status.sh
-rwx--x--x  1 root root  8077 Jan  5 13:44 cephfs-setup.sh
-rwx--x--x  1 root root  8341 Jan  5 13:39 pool-create.sh
-rwx--x--x  1 root root 15497 Jan  5 14:16 rbd-manage.sh
-rwx--x--x  1 root root  8481 Jan  5 13:47 recovery-check.sh
-rwx--x--x  1 root root  9120 Jan  5 14:09 rgw-setup.sh
-rwx--x--x  1 root root 11327 Jan  5 13:42 simulate-failure.sh

>>> ls /solutions/
(pas de repertoire solutions)

==============================================================================
  TP1: DECOUVERTE DU CLUSTER CEPH
==============================================================================

>>> /scripts/ceph-status.sh

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                       CEPH CLUSTER STATUS                         â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  [0;34mCluster ID:[0m d1756945-144a-49c7-88ed-488b9505157c
[0;36mâ•‘[0m  [0;34mHealth:[0m     [0;32mHEALTH_OK[0m
[0;36mâ•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m  [0;34mServices:[0m
[0;36mâ•‘[0m    mon: 3 daemons, quorum mon1,mon2,mon3 (age 0s)
[0;36mâ•‘[0m    mgr: mon1(active), standbys: mon2, mon3
[0;36mâ•‘[0m    osd: 3 osds: 3 up, 3 in
[0;36mâ•‘[0m    mds: cephfs:1 {0=mds1=up:active}
[0;36mâ•‘[0m    rgw: 1 daemon active (rgw1)
[0;36mâ•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m  [0;34mData:[0m
[0;36mâ•‘[0m    pools:   0 pools
[0;36mâ•‘[0m    objects: 0 objects, 0 B
[0;36mâ•‘[0m    usage:   0 GiB used, 3.0 GiB / 3.0 GiB avail
[0;36mâ•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m  [0;34mI/O:[0m
[0;36mâ•‘[0m    client:   0 B/s rd, 0 B/s wr, 0 op/s rd, 0 op/s wr
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/ceph-status.sh mon

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                       MONITOR STATUS                              â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Quorum: mon1, mon2, mon3
[0;36mâ•‘[0m
[0;36mâ•‘[0m  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
[0;36mâ•‘[0m  â”‚ Monitor  â”‚ Address       â”‚ Rank   â”‚ Status  â”‚
[0;36mâ•‘[0m  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
[0;36mâ•‘[0m  â”‚ mon1     â”‚ 172.20.0.11    â”‚ 1      â”‚ [0;32mup[0m     â”‚
[0;36mâ•‘[0m  â”‚ mon2     â”‚ 172.20.0.12    â”‚ 2      â”‚ [0;32mup[0m     â”‚
[0;36mâ•‘[0m  â”‚ mon3     â”‚ 172.20.0.13    â”‚ 3      â”‚ [0;32mup[0m     â”‚
[0;36mâ•‘[0m  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/ceph-status.sh osd

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                         OSD TREE                                  â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  ID   CLASS  WEIGHT   TYPE NAME         STATUS  REWEIGHT  PRI-AFF
[0;36mâ•‘[0m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[0;36mâ•‘[0m   -1         3.00000  root default
[0;36mâ•‘[0m   -3         1.00000      host osd1
[0;36mâ•‘[0m    0   hdd   1.00000          osd.0     [0;32mup[0m     1.00000   1.00000
[0;36mâ•‘[0m   -4         1.00000      host osd2
[0;36mâ•‘[0m    1   hdd   1.00000          osd.1     [0;32mup[0m     1.00000   1.00000
[0;36mâ•‘[0m   -5         1.00000      host osd3
[0;36mâ•‘[0m    2   hdd   1.00000          osd.2     [0;32mup[0m     1.00000   1.00000
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/ceph-health.sh

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    CEPH HEALTH DETAIL                             â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Status: [0;32mHEALTH_OK[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  [0;32mAll checks passed![0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Checks performed:
[0;36mâ•‘[0m    [[0;32mOK[0m] Monitor quorum: 3/3 monitors in quorum
[0;36mâ•‘[0m    [[0;32mOK[0m] OSD status: 3/3 OSDs up and in
[0;36mâ•‘[0m    [[0;32mOK[0m] PG status: All PGs active+clean
[0;36mâ•‘[0m    [[0;32mOK[0m] Disk usage: Below warning threshold
[0;36mâ•‘[0m    [[0;32mOK[0m] Scrub status: No issues found
[0;36mâ•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m  [0;34mComponent Status:[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m    Monitors:  [0;32m3/3 healthy[0m
[0;36mâ•‘[0m    OSDs:      [0;32m3/3 up, 3/3 in[0m
[0;36mâ•‘[0m    MDS:       [0;32m1 active[0m
[0;36mâ•‘[0m    RGW:       [0;32m1 active[0m
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


==============================================================================
  TP2: ARCHITECTURE CRUSH
==============================================================================

>>> /scripts/ceph-status.sh crush

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                       CEPH CLUSTER STATUS                         â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  [0;34mCluster ID:[0m d1756945-144a-49c7-88ed-488b9505157c
[0;36mâ•‘[0m  [0;34mHealth:[0m     [0;32mHEALTH_OK[0m
[0;36mâ•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m  [0;34mServices:[0m
[0;36mâ•‘[0m    mon: 3 daemons, quorum mon1,mon2,mon3 (age 0s)
[0;36mâ•‘[0m    mgr: mon1(active), standbys: mon2, mon3
[0;36mâ•‘[0m    osd: 3 osds: 3 up, 3 in
[0;36mâ•‘[0m    mds: cephfs:1 {0=mds1=up:active}
[0;36mâ•‘[0m    rgw: 1 daemon active (rgw1)
[0;36mâ•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m  [0;34mData:[0m
[0;36mâ•‘[0m    pools:   0 pools
[0;36mâ•‘[0m    objects: 0 objects, 0 B
[0;36mâ•‘[0m    usage:   0 GiB used, 3.0 GiB / 3.0 GiB avail
[0;36mâ•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m  [0;34mI/O:[0m
[0;36mâ•‘[0m    client:   0 B/s rd, 0 B/s wr, 0 op/s rd, 0 op/s wr
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


==============================================================================
  TP3: GESTION DES POOLS
==============================================================================

>>> /scripts/pool-create.sh list

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                         POOL LIST                                 â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  NAME                 ID    PGS    SIZE   APP
[0;36mâ•‘[0m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[0;36mâ•‘[0m  (aucun pool cree)
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/pool-create.sh mypool 64 3

[0;32mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;32mâ•‘                    POOL CREATED SUCCESSFULLY                      â•‘[0m
[0;32mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;32mâ•‘[0m
[0;32mâ•‘[0m  Pool Name:    mypool
[0;32mâ•‘[0m  Pool ID:      2
[0;32mâ•‘[0m  PG Count:     64
[0;32mâ•‘[0m  Size:         3 (replicas)
[0;32mâ•‘[0m  Min Size:     2
[0;32mâ•‘[0m  Type:         replicated
[0;32mâ•‘[0m
[0;32mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1;33mPour activer une application sur ce pool:[0m
  /scripts/pool-create.sh set mypool application rbd
  /scripts/pool-create.sh set mypool application cephfs
  /scripts/pool-create.sh set mypool application rgw

>>> /scripts/pool-create.sh list

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                         POOL LIST                                 â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  NAME                 ID    PGS    SIZE   APP
[0;36mâ•‘[0m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[0;36mâ•‘[0m  mypool               2     64     3      -
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/pool-create.sh stats mypool

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    POOL STATISTICS: mypool[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Configuration:
[0;36mâ•‘[0m    id:             2
[0;36mâ•‘[0m    pg_num:         64
[0;36mâ•‘[0m    pgp_num:        64
[0;36mâ•‘[0m    size:           3
[0;36mâ•‘[0m    min_size:       2
[0;36mâ•‘[0m    type:           replicated
[0;36mâ•‘[0m    application:    
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Statistics:
[0;36mâ•‘[0m    Objects:        0
[0;36mâ•‘[0m    Size:           0 B
[0;36mâ•‘[0m    Reads:          0 B/s
[0;36mâ•‘[0m    Writes:         0 B/s
[0;36mâ•‘[0m    Read Ops:       0 op/s
[0;36mâ•‘[0m    Write Ops:      0 op/s
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/pool-create.sh set mypool application rbd
[0;32mPool 'mypool': application = rbd[0m

>>> /scripts/pool-create.sh set mypool pg_num 128
[0;32mPool 'mypool': pg_num = 128[0m

>>> /scripts/pool-create.sh mypool-ec 64 3 erasure

[0;32mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;32mâ•‘                    POOL CREATED SUCCESSFULLY                      â•‘[0m
[0;32mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;32mâ•‘[0m
[0;32mâ•‘[0m  Pool Name:    mypool-ec
[0;32mâ•‘[0m  Pool ID:      3
[0;32mâ•‘[0m  PG Count:     64
[0;32mâ•‘[0m  Size:         3 (replicas)
[0;32mâ•‘[0m  Min Size:     2
[0;32mâ•‘[0m  Type:         replicated
[0;32mâ•‘[0m
[0;32mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1;33mPour activer une application sur ce pool:[0m
  /scripts/pool-create.sh set mypool-ec application rbd
  /scripts/pool-create.sh set mypool-ec application cephfs
  /scripts/pool-create.sh set mypool-ec application rgw

>>> /scripts/pool-create.sh list

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                         POOL LIST                                 â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  NAME                 ID    PGS    SIZE   APP
[0;36mâ•‘[0m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[0;36mâ•‘[0m  mypool               2     128    3      rbd
[0;36mâ•‘[0m  mypool-ec            3     64     3      -
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/pool-create.sh delete mypool-ec --yes-i-really-mean-it
[1;33mATTENTION: Vous allez supprimer le pool 'mypool-ec'[0m
[1;33mToutes les donnees seront perdues![0m
Annule.

==============================================================================
  TP4: RBD BLOCK STORAGE
==============================================================================

>>> /scripts/pool-create.sh rbd-pool 64 3

[0;32mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;32mâ•‘                    POOL CREATED SUCCESSFULLY                      â•‘[0m
[0;32mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;32mâ•‘[0m
[0;32mâ•‘[0m  Pool Name:    rbd-pool
[0;32mâ•‘[0m  Pool ID:      4
[0;32mâ•‘[0m  PG Count:     64
[0;32mâ•‘[0m  Size:         3 (replicas)
[0;32mâ•‘[0m  Min Size:     2
[0;32mâ•‘[0m  Type:         replicated
[0;32mâ•‘[0m
[0;32mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1;33mPour activer une application sur ce pool:[0m
  /scripts/pool-create.sh set rbd-pool application rbd
  /scripts/pool-create.sh set rbd-pool application cephfs
  /scripts/pool-create.sh set rbd-pool application rgw

>>> /scripts/pool-create.sh set rbd-pool application rbd
[0;32mPool 'rbd-pool': application = rbd[0m

>>> /scripts/rbd-manage.sh create rbd-pool/myimage --size 10G

[0;32mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;32mâ•‘                    RBD IMAGE CREATED                              â•‘[0m
[0;32mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;32mâ•‘[0m
[0;32mâ•‘[0m  Pool:    rbd-pool
[0;32mâ•‘[0m  Image:   myimage
[0;32mâ•‘[0m  Size:    10G
[0;32mâ•‘[0m  Format:  2
[0;32mâ•‘[0m
[0;32mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/rbd-manage.sh list rbd-pool

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    RBD IMAGES IN POOL: rbd-pool[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  myimage
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/rbd-manage.sh info rbd-pool/myimage

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    RBD IMAGE INFO                                 â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  rbd image 'myimage':
[0;36mâ•‘[0m    size:                10737418240
[0;36mâ•‘[0m    size_human:          10G
[0;36mâ•‘[0m    created:             2026-01-05T14:18:04+00:00
[0;36mâ•‘[0m    features:            layering,exclusive-lock,object-map,fast-diff,deep-flatten
[0;36mâ•‘[0m    format:              2
[0;36mâ•‘[0m    order:               22
[0;36mâ•‘[0m    object_size:         4194304
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Snapshots: 0
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/rbd-manage.sh map rbd-pool/myimage

[0;32mImage mappee: rbd-pool/myimage -> /dev/rbd0[0m

[1;33mFichier simule: /data/rbd0.img[0m

Pour formater et monter:
  mkfs.ext4 /data/rbd0.img
  mkdir -p /mnt/rbd
  mount -o loop /data/rbd0.img /mnt/rbd

>>> /scripts/rbd-manage.sh showmapped

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    MAPPED RBD IMAGES                              â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  ID   POOL         IMAGE          DEVICE
[0;36mâ•‘[0m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[0;36mâ•‘[0m  0    rbd-pool     myimage        /dev/rbd0
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/rbd-manage.sh snap create rbd-pool/myimage@snap1
[0;32mSnapshot cree: rbd-pool/myimage@snap1[0m

>>> /scripts/rbd-manage.sh snap list rbd-pool/myimage

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    SNAPSHOTS: rbd-pool/myimage[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  SNAPID   NAME              SIZE      PROTECTED   TIMESTAMP
[0;36mâ•‘[0m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[0;36mâ•‘[0m  1         snap1             10240M    false       2026-01-05T14:18:04+00:00
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/rbd-manage.sh resize rbd-pool/myimage --size 20G
[0;32mImage redimensionnee: rbd-pool/myimage -> 20G[0m

>>> /scripts/rbd-manage.sh info rbd-pool/myimage

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    RBD IMAGE INFO                                 â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  rbd image 'myimage':
[0;36mâ•‘[0m    size:                21474836480
[0;36mâ•‘[0m    size_human:          20G
[0;36mâ•‘[0m    created:             2026-01-05T14:18:04+00:00
[0;36mâ•‘[0m    features:            layering,exclusive-lock,object-map,fast-diff,deep-flatten
[0;36mâ•‘[0m    format:              2
[0;36mâ•‘[0m    order:               22
[0;36mâ•‘[0m    object_size:         4194304
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Snapshots: 1
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/rbd-manage.sh unmap /dev/rbd0
[0;32mImage demappee: /dev/rbd0[0m

==============================================================================
  TP5: CEPHFS
==============================================================================

>>> /scripts/cephfs-setup.sh create cephfs

[0;36mCreation du filesystem CephFS: cephfs[0m

Creation du pool de metadonnees...

[0;32mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;32mâ•‘                    POOL CREATED SUCCESSFULLY                      â•‘[0m
[0;32mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;32mâ•‘[0m
[0;32mâ•‘[0m  Pool Name:    cephfs-metadata
[0;32mâ•‘[0m  Pool ID:      5
[0;32mâ•‘[0m  PG Count:     32
[0;32mâ•‘[0m  Size:         3 (replicas)
[0;32mâ•‘[0m  Min Size:     2
[0;32mâ•‘[0m  Type:         replicated
[0;32mâ•‘[0m
[0;32mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1;33mPour activer une application sur ce pool:[0m
  /scripts/pool-create.sh set cephfs-metadata application rbd
  /scripts/pool-create.sh set cephfs-metadata application cephfs
  /scripts/pool-create.sh set cephfs-metadata application rgw
[0;32mPool 'cephfs-metadata': application = cephfs[0m
Creation du pool de donnees...

[0;32mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;32mâ•‘                    POOL CREATED SUCCESSFULLY                      â•‘[0m
[0;32mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;32mâ•‘[0m
[0;32mâ•‘[0m  Pool Name:    cephfs-data
[0;32mâ•‘[0m  Pool ID:      6
[0;32mâ•‘[0m  PG Count:     64
[0;32mâ•‘[0m  Size:         3 (replicas)
[0;32mâ•‘[0m  Min Size:     2
[0;32mâ•‘[0m  Type:         replicated
[0;32mâ•‘[0m
[0;32mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1;33mPour activer une application sur ce pool:[0m
  /scripts/pool-create.sh set cephfs-data application rbd
  /scripts/pool-create.sh set cephfs-data application cephfs
  /scripts/pool-create.sh set cephfs-data application rgw
[0;32mPool 'cephfs-data': application = cephfs[0m

[0;32mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;32mâ•‘                    CEPHFS CREATED                                 â•‘[0m
[0;32mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;32mâ•‘[0m
[0;32mâ•‘[0m  Filesystem:     cephfs
[0;32mâ•‘[0m  Metadata Pool:  cephfs-metadata
[0;32mâ•‘[0m  Data Pool:      cephfs-data
[0;32mâ•‘[0m  MDS:            mds1 (active)
[0;32mâ•‘[0m
[0;32mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

Pour monter le filesystem:
  /scripts/cephfs-setup.sh mount cephfs /mnt/cephfs


>>> /scripts/cephfs-setup.sh list

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                       CEPHFS LIST                                 â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  NAME              METADATA POOL         DATA POOL
[0;36mâ•‘[0m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[0;36mâ•‘[0m  cephfs            cephfs-metadata       cephfs-metadata
cephfs-data
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/cephfs-setup.sh status cephfs

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    CEPHFS STATUS: cephfs[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Filesystem: cephfs
[0;36mâ•‘[0m  Status: [0;32mactive[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  MDS:
[0;36mâ•‘[0m    mds1: [0;32mactive[0m (rank 0)
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Pools:
[0;36mâ•‘[0m    Metadata: cephfs-metadata
[0;36mâ•‘[0m    Data:     cephfs-metadata
cephfs-data
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/cephfs-setup.sh mount cephfs /mnt/cephfs

[0;32mCephFS 'cephfs' monte sur /mnt/cephfs[0m

Verification:
  ls /mnt/cephfs

Pour demonter:
  /scripts/cephfs-setup.sh umount /mnt/cephfs


>>> ls /mnt/cephfs/
total 20
drwxr-xr-x 3 root root 4096 Jan  5 14:18 .
drwxr-xr-x 1 root root 4096 Jan  5 14:18 ..
-rw-r--r-- 1 root root    7 Jan  5 14:18 .cephfs_mounted
-rw-r--r-- 1 root root   22 Jan  5 14:18 README.txt
drwxr-xr-x 2 root root 4096 Jan  5 14:18 shared

>>> echo 'Test CephFS workshop' > /mnt/cephfs/test.txt

>>> cat /mnt/cephfs/test.txt
Test CephFS workshop

>>> /scripts/cephfs-setup.sh snap create /mnt/cephfs

[0;32mSnapshot cree: /mnt/cephfs/.snap/snap-20260105-141804[0m

Pour lister les snapshots:
  ls /mnt/cephfs/.snap/

Pour restaurer un fichier:
  cp /mnt/cephfs/.snap/snap-20260105-141804/file /mnt/cephfs/file


>>> ls /mnt/cephfs/.snap/
total 12
drwxr-xr-x 3 root root 4096 Jan  5 14:18 .
drwxr-xr-x 4 root root 4096 Jan  5 14:18 ..
drwxr-xr-x 2 root root 4096 Jan  5 14:18 snap-20260105-141804

>>> /scripts/cephfs-setup.sh umount /mnt/cephfs
Filesystem demonte de /mnt/cephfs

==============================================================================
  TP6: OBJECT STORAGE (RGW)
==============================================================================

>>> /scripts/rgw-setup.sh user create --uid=workshop --display-name='Workshop User'

[0;32mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;32mâ•‘                    USER CREATED SUCCESSFULLY                      â•‘[0m
[0;32mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;32mâ•‘[0m
[0;32mâ•‘[0m  User ID:      workshop
[0;32mâ•‘[0m  Display Name: Workshop User
[0;32mâ•‘[0m  Email:        workshop@example.com
[0;32mâ•‘[0m
[0;32mâ•‘[0m  [1;33mCredentials (SAVE THESE!):[0m
[0;32mâ•‘[0m  Access Key:   iWsd07aEDgy8T9TG1zuq
[0;32mâ•‘[0m  Secret Key:   r5hb3zU3MJJ47KadZPeOvB2iF3vs5ZcbeLCURBKa
[0;32mâ•‘[0m
[0;32mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

Configuration AWS CLI:

  aws configure
  AWS Access Key ID: iWsd07aEDgy8T9TG1zuq
  AWS Secret Access Key: r5hb3zU3MJJ47KadZPeOvB2iF3vs5ZcbeLCURBKa

Ou creez ~/.aws/credentials:

  [default]
  aws_access_key_id = iWsd07aEDgy8T9TG1zuq
  aws_secret_access_key = r5hb3zU3MJJ47KadZPeOvB2iF3vs5ZcbeLCURBKa

Endpoint RGW: http://ceph-rgw:7480


>>> /scripts/rgw-setup.sh user list

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                        RGW USERS                                  â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  - workshop
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/rgw-setup.sh user info workshop
[0;31mErreur: --uid requis[0m

>>> /scripts/rgw-setup.sh bucket list

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                        RGW BUCKETS                                â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  BUCKET                  OWNER        SIZE      OBJECTS
[0;36mâ•‘[0m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[0;36mâ•‘[0m  (aucun bucket)
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/rgw-setup.sh quota set --uid=workshop --max-size=10G
[0;32mQuota configure pour workshop:[0m
  Max size: 10G

==============================================================================
  TP7: HAUTE DISPONIBILITE ET FAILOVER
==============================================================================

>>> /scripts/ceph-health.sh

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    CEPH HEALTH DETAIL                             â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Status: [0;32mHEALTH_OK[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  [0;32mAll checks passed![0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Checks performed:
[0;36mâ•‘[0m    [[0;32mOK[0m] Monitor quorum: 3/3 monitors in quorum
[0;36mâ•‘[0m    [[0;32mOK[0m] OSD status: 3/3 OSDs up and in
[0;36mâ•‘[0m    [[0;32mOK[0m] PG status: All PGs active+clean
[0;36mâ•‘[0m    [[0;32mOK[0m] Disk usage: Below warning threshold
[0;36mâ•‘[0m    [[0;32mOK[0m] Scrub status: No issues found
[0;36mâ•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m  [0;34mComponent Status:[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m    Monitors:  [0;32m3/3 healthy[0m
[0;36mâ•‘[0m    OSDs:      [0;32m3/3 up, 3/3 in[0m
[0;36mâ•‘[0m    MDS:       [0;32m1 active[0m
[0;36mâ•‘[0m    RGW:       [0;32m1 active[0m
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/simulate-failure.sh osd.0

[0;31mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;31mâ•‘              SIMULATION: OSD.0 DOWN                              â•‘[0m
[0;31mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1;33mEtat du cluster:[0m
  - OSD.0: \033[0;31mDOWN\033[0m
  - Cluster: \033[1;33mHEALTH_WARN\033[0m

[0;36mImpact:[0m
  - Certains PGs sont degrades
  - Les donnees restent accessibles (min_size=2)
  - Recovery automatique si l'OSD revient

[1;33mActions recommandees:[0m
  1. Verifier les logs: journalctl -u ceph-osd@0
  2. Verifier le disque: smartctl -a /dev/sdX
  3. Si HS: remplacer le disque

Pour restaurer: /scripts/simulate-failure.sh restore


>>> /scripts/ceph-health.sh

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    CEPH HEALTH DETAIL                             â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Status: [1;33mHEALTH_WARN[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  [1;33mWarnings detected:[0m
[0;36mâ•‘[0m    [1;33m[WARN][0m 1 OSD down (osd.0)
[0;36mâ•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m  [0;34mComponent Status:[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m    Monitors:  [0;32m3/3 healthy[0m
[0;36mâ•‘[0m    OSDs:      [0;32m3/3 up, 3/3 in[0m
[0;36mâ•‘[0m    MDS:       [0;32m1 active[0m
[0;36mâ•‘[0m    RGW:       [0;32m1 active[0m
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/recovery-check.sh status

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    RECOVERY STATUS                                â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Status: [1;33mRECOVERY IN PROGRESS[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  PGs recovering:  5
[0;36mâ•‘[0m  PGs degraded:    4
[0;36mâ•‘[0m  PGs misplaced:   2
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Recovery Stats:
[0;36mâ•‘[0m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[0;36mâ•‘[0m  Objects recovered:  1153
[0;36mâ•‘[0m  Bytes recovered:    563 MB
[0;36mâ•‘[0m  Recovery rate:      62 MB/s
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/simulate-failure.sh restore

[0;32mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;32mâ•‘              RESTAURATION DE L'ETAT NORMAL                        â•‘[0m
[0;32mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[0;32mCluster restaure a l'etat normal.[0m

Verification:

Cluster Health: [0;32mHEALTH_OK[0m


>>> /scripts/ceph-health.sh

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    CEPH HEALTH DETAIL                             â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Status: [0;32mHEALTH_OK[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  [0;32mAll checks passed![0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Checks performed:
[0;36mâ•‘[0m    [[0;32mOK[0m] Monitor quorum: 3/3 monitors in quorum
[0;36mâ•‘[0m    [[0;32mOK[0m] OSD status: 3/3 OSDs up and in
[0;36mâ•‘[0m    [[0;32mOK[0m] PG status: All PGs active+clean
[0;36mâ•‘[0m    [[0;32mOK[0m] Disk usage: Below warning threshold
[0;36mâ•‘[0m    [[0;32mOK[0m] Scrub status: No issues found
[0;36mâ•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m  [0;34mComponent Status:[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m    Monitors:  [0;32m3/3 healthy[0m
[0;36mâ•‘[0m    OSDs:      [0;32m3/3 up, 3/3 in[0m
[0;36mâ•‘[0m    MDS:       [0;32m1 active[0m
[0;36mâ•‘[0m    RGW:       [0;32m1 active[0m
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/simulate-failure.sh mon.mon2

[0;31mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;31mâ•‘              SIMULATION: MONITOR mon2 DOWN                        â•‘[0m
[0;31mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

/scripts/simulate-failure.sh: line 90: [: /var/lib/ceph/state/mon_mon1_status:1
/var/lib/ceph/state/mon_mon2_status:0
/var/lib/ceph/state/mon_mon3_status:1: integer expression expected
[1;33mEtat du cluster:[0m
  - Monitor mon2: \033[0;31mDOWN\033[0m
/scripts/simulate-failure.sh: line 101: /var/lib/ceph/state/mon_mon1_status:1
/var/lib/ceph/state/mon_mon2_status:0
/var/lib/ceph/state/mon_mon3_status:1: syntax error: operand expected (error token is "/var/lib/ceph/state/mon_mon1_status:1
/var/lib/ceph/state/mon_mon2_status:0
/var/lib/ceph/state/mon_mon3_status:1")

>>> /scripts/ceph-status.sh mon

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                       MONITOR STATUS                              â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Quorum: mon1, mon2, mon3
[0;36mâ•‘[0m
[0;36mâ•‘[0m  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
[0;36mâ•‘[0m  â”‚ Monitor  â”‚ Address       â”‚ Rank   â”‚ Status  â”‚
[0;36mâ•‘[0m  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
[0;36mâ•‘[0m  â”‚ mon1     â”‚ 172.20.0.11    â”‚ 1      â”‚ [0;32mup[0m     â”‚
[0;36mâ•‘[0m  â”‚ mon2     â”‚ 172.20.0.12    â”‚ 2      â”‚ [0;32mup[0m     â”‚
[0;36mâ•‘[0m  â”‚ mon3     â”‚ 172.20.0.13    â”‚ 3      â”‚ [0;32mup[0m     â”‚
[0;36mâ•‘[0m  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/simulate-failure.sh restore

[0;32mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;32mâ•‘              RESTAURATION DE L'ETAT NORMAL                        â•‘[0m
[0;32mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[0;32mCluster restaure a l'etat normal.[0m

Verification:

Cluster Health: [0;32mHEALTH_OK[0m


>>> /scripts/simulate-failure.sh scenario-1

[0;31mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;31mâ•‘        SCENARIO PCA 1: PERTE D'UN RACK                            â•‘[0m
[0;31mâ•‘        (1 Monitor + 1 OSD)                                        â•‘[0m
[0;31mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1;33mSimulation:[0m
  - Monitor mon3: \033[0;31mDOWN\033[0m
  - OSD.2: \033[0;31mDOWN\033[0m

[0;32mImpact:[0m
  - Quorum maintenu (2/3 monitors)
  - Donnees accessibles (2 replicas disponibles)
  - Recovery automatique possible

[0;36mRTO estime: ~5 minutes (recovery automatique)[0m
[0;36mRPO: 0 (aucune perte de donnees)[0m


>>> /scripts/recovery-check.sh status

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    RECOVERY STATUS                                â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Status: [1;33mRECOVERY IN PROGRESS[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  PGs recovering:  4
[0;36mâ•‘[0m  PGs degraded:    0
[0;36mâ•‘[0m  PGs misplaced:   2
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Recovery Stats:
[0;36mâ•‘[0m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[0;36mâ•‘[0m  Objects recovered:  712
[0;36mâ•‘[0m  Bytes recovered:    321 MB
[0;36mâ•‘[0m  Recovery rate:      54 MB/s
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/simulate-failure.sh restore

[0;32mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;32mâ•‘              RESTAURATION DE L'ETAT NORMAL                        â•‘[0m
[0;32mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[0;32mCluster restaure a l'etat normal.[0m

Verification:

Cluster Health: [0;32mHEALTH_OK[0m


>>> /scripts/simulate-failure.sh scenario-2

[0;31mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;31mâ•‘        SCENARIO PCA 2: PERTE DE 2 OSDs                            â•‘[0m
[0;31mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1;33mSimulation:[0m
  - OSD.1: \033[0;31mDOWN\033[0m
  - OSD.2: \033[0;31mDOWN\033[0m

[1;33mImpact:[0m
  - Certains PGs n'ont qu'1 replica
  - Donnees accessibles si min_size=1
  - \033[0;31mATTENTION: Risque de perte de donnees si OSD.0 tombe\033[0m


>>> /scripts/recovery-check.sh status

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    RECOVERY STATUS                                â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Status: [1;33mRECOVERY IN PROGRESS[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  PGs recovering:  4
[0;36mâ•‘[0m  PGs degraded:    3
[0;36mâ•‘[0m  PGs misplaced:   2
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Recovery Stats:
[0;36mâ•‘[0m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[0;36mâ•‘[0m  Objects recovered:  1236
[0;36mâ•‘[0m  Bytes recovered:    490 MB
[0;36mâ•‘[0m  Recovery rate:      58 MB/s
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/simulate-failure.sh restore

[0;32mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;32mâ•‘              RESTAURATION DE L'ETAT NORMAL                        â•‘[0m
[0;32mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[0;32mCluster restaure a l'etat normal.[0m

Verification:

Cluster Health: [0;32mHEALTH_OK[0m


>>> /scripts/simulate-failure.sh scenario-quorum

[0;31mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;31mâ•‘        SCENARIO CRITIQUE: PERTE DU QUORUM                         â•‘[0m
[0;31mâ•‘        (2 Monitors DOWN)                                          â•‘[0m
[0;31mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[0;31m!!! ALERTE CRITIQUE !!![0m

[1;33mSimulation:[0m
  - Monitor mon2: \033[0;31mDOWN\033[0m
  - Monitor mon3: \033[0;31mDOWN\033[0m
  - Quorum: \033[0;31m1/3 - PERDU\033[0m

[0;31mImpact:[0m
  - Cluster en mode READ-ONLY
  - Impossible de modifier la configuration
  - Les ecritures sont bloquees

[1;33mActions requises:[0m
  1. Restaurer au moins 1 monitor supplementaire
  2. Ou reconstruire le quorum manuellement


>>> /scripts/ceph-status.sh mon

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                       MONITOR STATUS                              â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Quorum: mon1, mon2, mon3
[0;36mâ•‘[0m
[0;36mâ•‘[0m  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
[0;36mâ•‘[0m  â”‚ Monitor  â”‚ Address       â”‚ Rank   â”‚ Status  â”‚
[0;36mâ•‘[0m  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
[0;36mâ•‘[0m  â”‚ mon1     â”‚ 172.20.0.11    â”‚ 1      â”‚ [0;32mup[0m     â”‚
[0;36mâ•‘[0m  â”‚ mon2     â”‚ 172.20.0.12    â”‚ 2      â”‚ [0;32mup[0m     â”‚
[0;36mâ•‘[0m  â”‚ mon3     â”‚ 172.20.0.13    â”‚ 3      â”‚ [0;32mup[0m     â”‚
[0;36mâ•‘[0m  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/simulate-failure.sh restore

[0;32mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;32mâ•‘              RESTAURATION DE L'ETAT NORMAL                        â•‘[0m
[0;32mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[0;32mCluster restaure a l'etat normal.[0m

Verification:

Cluster Health: [0;32mHEALTH_OK[0m


==============================================================================
  TP8: BACKUP ET RECOVERY (PCA/PRA)
==============================================================================

>>> /scripts/backup-restore.sh backup config

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    CONFIG BACKUP                                  â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Backup ID: config-20260105-141805
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

Backing up configuration files...
  Backing up ceph.conf...
  Backing up crush-map...
  Backing up mon-map...
  Backing up osd-map...
  Backing up auth-keys...

[0;32mConfiguration backup completed![0m
  Location: /var/lib/ceph/backups/config-20260105-141805


>>> /scripts/backup-restore.sh backup pool mypool

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    POOL BACKUP                                    â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Pool:      mypool
[0;36mâ•‘[0m  Backup ID: pool-mypool-20260105-141807
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

Phase 1: Collecting pool metadata...
  Metadata saved

Phase 2: Exporting objects...
  Progress: 20%
  Progress: 40%
  Progress: 60%
  Progress: 80%
  Progress: 100%

Phase 3: Calculating checksums...
  SHA256: b248f1f24fb72f813b78c35ab12b6862ce72fef9af8392a712487156cdb21533

[0;32mBackup completed successfully![0m
  Location: /var/lib/ceph/backups/pool-mypool-20260105-141807


>>> /scripts/backup-restore.sh backup rbd rbd-pool/myimage

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    RBD IMAGE BACKUP                               â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Pool:      rbd-pool
[0;36mâ•‘[0m  Image:     myimage
[0;36mâ•‘[0m  Backup ID: rbd-rbd-pool-myimage-20260105-141814
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

Phase 1: Creating snapshot for consistent backup...
  Snapshot: myimage@backup-snap

Phase 2: Exporting image...
  Exported: 110MB / 552MB (20%)
  Exported: 220MB / 552MB (40%)
  Exported: 331MB / 552MB (60%)
  Exported: 441MB / 552MB (80%)
  Exported: 552MB / 552MB (100%)

[0;32mRBD backup completed successfully![0m
  Location: /var/lib/ceph/backups/rbd-rbd-pool-myimage-20260105-141814


>>> /scripts/backup-restore.sh list

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    AVAILABLE BACKUPS                              â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  ID                              TYPE     SIZE      STATUS
[0;36mâ•‘[0m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[0;36mâ•‘[0m  config-20260105-141805            config   N/AMB     [0;32mcompleted[0m
[0;36mâ•‘[0m  pool-mypool-20260105-141807       pool     N/AMB     [0;32mcompleted[0m
[0;36mâ•‘[0m  rbd-rbd-pool-myimage-20260105-141814 rbd      552MB     [0;32mcompleted[0m
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/recovery-check.sh history

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    RECOVERY HISTORY                               â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  TIMESTAMP                  TYPE          DURATION   STATUS
[0;36mâ•‘[0m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[0;36mâ•‘[0m  2026-01-03 14:18         PG_REPAIR     22m 2s     [0;32mcompleted[0m
[0;36mâ•‘[0m  2026-01-01 14:18         BACKFILL      12m 26s    [0;32mcompleted[0m
[0;36mâ•‘[0m  2025-12-30 14:18         OSD_DOWN      24m 14s    [0;32mcompleted[0m
[0;36mâ•‘[0m  2025-12-28 14:18         SCRUB         23m 30s    [0;32mcompleted[0m
[0;36mâ•‘[0m  2025-12-26 14:18         OSD_DOWN      13m 3s     [0;32mcompleted[0m
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/recovery-check.sh simulate

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    SIMULATING RECOVERY                            â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Phase 1: Detecting failure...
[0;36mâ•‘[0m           [1;33mOSD.2 marked DOWN[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Phase 2: Initiating recovery...
[0;36mâ•‘[0m           Remapping 128 PGs
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Phase 3: Data recovery in progress...
[0;36mâ•‘[0m           Progress: 20%
[0;36mâ•‘[0m           Progress: 40%
[0;36mâ•‘[0m           Progress: 60%
[0;36mâ•‘[0m           Progress: 80%
[0;36mâ•‘[0m           Progress: 100%
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Phase 4: Verification...
[0;36mâ•‘[0m           [0;32mAll data verified[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  [0;32mRecovery simulation complete![0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Summary:
[0;36mâ•‘[0m    - Objects recovered: 1,024
[0;36mâ•‘[0m    - Data transferred: 256 MB
[0;36mâ•‘[0m    - Duration: 5s (simulated)
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


==============================================================================
  TP9: BENCHMARKING ET PERFORMANCE
==============================================================================

>>> /scripts/pool-create.sh benchmark-pool 64 3

[0;32mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;32mâ•‘                    POOL CREATED SUCCESSFULLY                      â•‘[0m
[0;32mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;32mâ•‘[0m
[0;32mâ•‘[0m  Pool Name:    benchmark-pool
[0;32mâ•‘[0m  Pool ID:      7
[0;32mâ•‘[0m  PG Count:     64
[0;32mâ•‘[0m  Size:         3 (replicas)
[0;32mâ•‘[0m  Min Size:     2
[0;32mâ•‘[0m  Type:         replicated
[0;32mâ•‘[0m
[0;32mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1;33mPour activer une application sur ce pool:[0m
  /scripts/pool-create.sh set benchmark-pool application rbd
  /scripts/pool-create.sh set benchmark-pool application cephfs
  /scripts/pool-create.sh set benchmark-pool application rgw

>>> /scripts/benchmark.sh rados --size 4M --count 50

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    RADOS BENCHMARK                                â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Pool:        benchmark-pool
[0;36mâ•‘[0m  Object Size: 4M
[0;36mâ•‘[0m  Count:       50
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

Phase 1: Write benchmark...
  Write IOPS: 1882
  Write Bandwidth: 7 MB/s

Phase 2: Sequential read benchmark...
  Sequential Read IOPS: 2329
  Sequential Read Bandwidth: 9 MB/s

Phase 3: Random read benchmark...
  Random Read IOPS: 1263
  Random Read Bandwidth: 4 MB/s

[0;32mResultats sauvegardes dans /tmp/ceph-benchmarks/rados-benchmark.json[0m


>>> /scripts/benchmark.sh rbd --size 500M

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    RBD BENCHMARK                                  â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Image Size: 500M
[0;36mâ•‘[0m  Test Type:  fio (4k random, 1M sequential)
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

Test 1: 4K Random Write...
  IOPS: 10296
  Latency: 118us

Test 2: 4K Random Read...
  IOPS: 15331
  Latency: 68us

Test 3: 1M Sequential Write...
  Bandwidth: 507 MB/s

Test 4: 1M Sequential Read...
  Bandwidth: 715 MB/s

[0;32mResultats sauvegardes dans /tmp/ceph-benchmarks/rbd-benchmark.json[0m


>>> /scripts/benchmark.sh fs

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    CEPHFS BENCHMARK                               â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Mount Point: /mnt/cephfs
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

Test 1: Metadata operations (file creation)...
  File creation rate: 1062 files/sec

Test 2: Small file write (4K)...
  IOPS: 3348

Test 3: Large file write (1M)...
  Bandwidth: 346 MB/s

Test 4: Directory listing (1000 files)...
  Time: 34ms

[0;32mResultats sauvegardes dans /tmp/ceph-benchmarks/cephfs-benchmark.json[0m


>>> /scripts/benchmark.sh report

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    BENCHMARK REPORT                               â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Generated: Mon Jan  5 14:18:40 UTC 2026
[0;36mâ•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  [0;32mRADOS Results:[0m
[0;36mâ•‘[0m    {
[0;36mâ•‘[0m    "timestamp": "2026-01-05T14:18:32+00:00",
[0;36mâ•‘[0m    "type": "rados",
[0;36mâ•‘[0m    "pool": "benchmark-pool",
[0;36mâ•‘[0m    "object_size": "4M",
[0;36mâ•‘[0m    "count": 50,
[0;36mâ•‘[0m    "results": {
[0;36mâ•‘[0m    "write": {
[0;36mâ•‘[0m    "iops": 1882,
[0;36mâ•‘[0m    "bandwidth_mb": 7
[0;36mâ•‘[0m    },
[0;36mâ•‘[0m    "sequential_read": {
[0;36mâ•‘[0m    "iops": 2329,
[0;36mâ•‘[0m    "bandwidth_mb": 9
[0;36mâ•‘[0m    },
[0;36mâ•‘[0m    "random_read": {
[0;36mâ•‘[0m    "iops": 1263,
[0;36mâ•‘[0m    "bandwidth_mb": 4
[0;36mâ•‘[0m    }
[0;36mâ•‘[0m    }
[0;36mâ•‘[0m    }
[0;36mâ•‘[0m
[0;36mâ•‘[0m  [0;32mRBD Results:[0m
[0;36mâ•‘[0m    {
[0;36mâ•‘[0m    "timestamp": "2026-01-05T14:18:36+00:00",
[0;36mâ•‘[0m    "type": "rbd",
[0;36mâ•‘[0m    "image_size": "500M",
[0;36mâ•‘[0m    "results": {
[0;36mâ•‘[0m    "4k_random_write": {
[0;36mâ•‘[0m    "iops": 10296
[0;36mâ•‘[0m    },
[0;36mâ•‘[0m    "4k_random_read": {
[0;36mâ•‘[0m    "iops": 15331
[0;36mâ•‘[0m    },
[0;36mâ•‘[0m    "1m_sequential_write": {
[0;36mâ•‘[0m    "bandwidth_mb": 507
[0;36mâ•‘[0m    },
[0;36mâ•‘[0m    "1m_sequential_read": {
[0;36mâ•‘[0m    "bandwidth_mb": 715
[0;36mâ•‘[0m    }
[0;36mâ•‘[0m    }
[0;36mâ•‘[0m    }
[0;36mâ•‘[0m
[0;36mâ•‘[0m  [0;32mCephFS Results:[0m
[0;36mâ•‘[0m    {
[0;36mâ•‘[0m    "timestamp": "2026-01-05T14:18:40+00:00",
[0;36mâ•‘[0m    "type": "cephfs",
[0;36mâ•‘[0m    "mount_point": "/mnt/cephfs",
[0;36mâ•‘[0m    "results": {
[0;36mâ•‘[0m    "file_creation": {
[0;36mâ•‘[0m    "rate": 1062
[0;36mâ•‘[0m    },
[0;36mâ•‘[0m    "small_file_write": {
[0;36mâ•‘[0m    "iops": 3348
[0;36mâ•‘[0m    },
[0;36mâ•‘[0m    "large_file_write": {
[0;36mâ•‘[0m    "bandwidth_mb": 346
[0;36mâ•‘[0m    },
[0;36mâ•‘[0m    "directory_listing": {
[0;36mâ•‘[0m    "time_ms": 34
[0;36mâ•‘[0m    }
[0;36mâ•‘[0m    }
[0;36mâ•‘[0m    }
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


==============================================================================
  TP10: SCENARIO PCA COMPLET
==============================================================================

>>> Verification etat initial

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    CEPH HEALTH DETAIL                             â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Status: [0;32mHEALTH_OK[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  [0;32mAll checks passed![0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Checks performed:
[0;36mâ•‘[0m    [[0;32mOK[0m] Monitor quorum: 3/3 monitors in quorum
[0;36mâ•‘[0m    [[0;32mOK[0m] OSD status: 3/3 OSDs up and in
[0;36mâ•‘[0m    [[0;32mOK[0m] PG status: All PGs active+clean
[0;36mâ•‘[0m    [[0;32mOK[0m] Disk usage: Below warning threshold
[0;36mâ•‘[0m    [[0;32mOK[0m] Scrub status: No issues found
[0;36mâ•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m  [0;34mComponent Status:[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m    Monitors:  [0;32m3/3 healthy[0m
[0;36mâ•‘[0m    OSDs:      [0;32m3/3 up, 3/3 in[0m
[0;36mâ•‘[0m    MDS:       [0;32m1 active[0m
[0;36mâ•‘[0m    RGW:       [0;32m1 active[0m
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> Creation pool production

[0;32mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;32mâ•‘                    POOL CREATED SUCCESSFULLY                      â•‘[0m
[0;32mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;32mâ•‘[0m
[0;32mâ•‘[0m  Pool Name:    production-pool
[0;32mâ•‘[0m  Pool ID:      8
[0;32mâ•‘[0m  PG Count:     64
[0;32mâ•‘[0m  Size:         3 (replicas)
[0;32mâ•‘[0m  Min Size:     2
[0;32mâ•‘[0m  Type:         replicated
[0;32mâ•‘[0m
[0;32mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1;33mPour activer une application sur ce pool:[0m
  /scripts/pool-create.sh set production-pool application rbd
  /scripts/pool-create.sh set production-pool application cephfs
  /scripts/pool-create.sh set production-pool application rgw

>>> Creation image critique

[0;32mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;32mâ•‘                    RBD IMAGE CREATED                              â•‘[0m
[0;32mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;32mâ•‘[0m
[0;32mâ•‘[0m  Pool:    production-pool
[0;32mâ•‘[0m  Image:   critical-db
[0;32mâ•‘[0m  Size:    50G
[0;32mâ•‘[0m  Format:  2
[0;32mâ•‘[0m
[0;32mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> Backup initial

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    RBD IMAGE BACKUP                               â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Pool:      production-pool
[0;36mâ•‘[0m  Image:     critical-db
[0;36mâ•‘[0m  Backup ID: rbd-production-pool-critical-db-20260105-141840
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

Phase 1: Creating snapshot for consistent backup...
  Snapshot: critical-db@backup-snap

Phase 2: Exporting image...
  Exported: 81MB / 407MB (20%)
  Exported: 162MB / 407MB (40%)
  Exported: 244MB / 407MB (60%)
  Exported: 325MB / 407MB (80%)
  Exported: 407MB / 407MB (100%)

[0;32mRBD backup completed successfully![0m
  Location: /var/lib/ceph/backups/rbd-production-pool-critical-db-20260105-141840


>>> Simulation sinistre - OSD.1 down

[0;31mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;31mâ•‘              SIMULATION: OSD.1 DOWN                              â•‘[0m
[0;31mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[1;33mEtat du cluster:[0m
  - OSD.1: \033[0;31mDOWN\033[0m
  - Cluster: \033[1;33mHEALTH_WARN\033[0m

[0;36mImpact:[0m
  - Certains PGs sont degrades
  - Les donnees restent accessibles (min_size=2)
  - Recovery automatique si l'OSD revient

[1;33mActions recommandees:[0m
  1. Verifier les logs: journalctl -u ceph-osd@1
  2. Verifier le disque: smartctl -a /dev/sdX
  3. Si HS: remplacer le disque

Pour restaurer: /scripts/simulate-failure.sh restore


>>> Verification impact

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    CEPH HEALTH DETAIL                             â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Status: [1;33mHEALTH_WARN[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  [1;33mWarnings detected:[0m
[0;36mâ•‘[0m    [1;33m[WARN][0m 1 OSD down (osd.1)
[0;36mâ•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m  [0;34mComponent Status:[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m    Monitors:  [0;32m3/3 healthy[0m
[0;36mâ•‘[0m    OSDs:      [0;32m3/3 up, 3/3 in[0m
[0;36mâ•‘[0m    MDS:       [0;32m1 active[0m
[0;36mâ•‘[0m    RGW:       [0;32m1 active[0m
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> Monitoring recovery

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    RECOVERY STATUS                                â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Status: [1;33mRECOVERY IN PROGRESS[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  PGs recovering:  5
[0;36mâ•‘[0m  PGs degraded:    0
[0;36mâ•‘[0m  PGs misplaced:   0
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Recovery Stats:
[0;36mâ•‘[0m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[0;36mâ•‘[0m  Objects recovered:  1217
[0;36mâ•‘[0m  Bytes recovered:    177 MB
[0;36mâ•‘[0m  Recovery rate:      21 MB/s
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> Restauration

[0;32mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;32mâ•‘              RESTAURATION DE L'ETAT NORMAL                        â•‘[0m
[0;32mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[0;32mCluster restaure a l'etat normal.[0m

Verification:

Cluster Health: [0;32mHEALTH_OK[0m


>>> Verification finale

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    CEPH HEALTH DETAIL                             â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Status: [0;32mHEALTH_OK[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  [0;32mAll checks passed![0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  Checks performed:
[0;36mâ•‘[0m    [[0;32mOK[0m] Monitor quorum: 3/3 monitors in quorum
[0;36mâ•‘[0m    [[0;32mOK[0m] OSD status: 3/3 OSDs up and in
[0;36mâ•‘[0m    [[0;32mOK[0m] PG status: All PGs active+clean
[0;36mâ•‘[0m    [[0;32mOK[0m] Disk usage: Below warning threshold
[0;36mâ•‘[0m    [[0;32mOK[0m] Scrub status: No issues found
[0;36mâ•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m  [0;34mComponent Status:[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m    Monitors:  [0;32m3/3 healthy[0m
[0;36mâ•‘[0m    OSDs:      [0;32m3/3 up, 3/3 in[0m
[0;36mâ•‘[0m    MDS:       [0;32m1 active[0m
[0;36mâ•‘[0m    RGW:       [0;32m1 active[0m
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> Liste des backups

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    AVAILABLE BACKUPS                              â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  ID                              TYPE     SIZE      STATUS
[0;36mâ•‘[0m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[0;36mâ•‘[0m  config-20260105-141805            config   N/AMB     [0;32mcompleted[0m
[0;36mâ•‘[0m  pool-mypool-20260105-141807       pool     N/AMB     [0;32mcompleted[0m
[0;36mâ•‘[0m  rbd-production-pool-critical-db-20260105-141840 rbd      407MB     [0;32mcompleted[0m
[0;36mâ•‘[0m  rbd-rbd-pool-myimage-20260105-141814 rbd      552MB     [0;32mcompleted[0m
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


==============================================================================
  VERIFICATION FINALE
==============================================================================

>>> /scripts/ceph-status.sh

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                       CEPH CLUSTER STATUS                         â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  [0;34mCluster ID:[0m d1756945-144a-49c7-88ed-488b9505157c
[0;36mâ•‘[0m  [0;34mHealth:[0m     [0;32mHEALTH_OK[0m
[0;36mâ•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m  [0;34mServices:[0m
[0;36mâ•‘[0m    mon: 3 daemons, quorum mon1,mon2,mon3 (age 0s)
[0;36mâ•‘[0m    mgr: mon1(active), standbys: mon2, mon3
[0;36mâ•‘[0m    osd: 3 osds: 3 up, 3 in
[0;36mâ•‘[0m    mds: cephfs:1 {0=mds1=up:active}
[0;36mâ•‘[0m    rgw: 1 daemon active (rgw1)
[0;36mâ•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m  [0;34mData:[0m
[0;36mâ•‘[0m    pools:   7 pools
[0;36mâ•‘[0m    objects: 0 objects, 0 B
[0;36mâ•‘[0m    usage:   0 GiB used, 3.0 GiB / 3.0 GiB avail
[0;36mâ•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m  [0;34mI/O:[0m
[0;36mâ•‘[0m    client:   0 B/s rd, 0 B/s wr, 0 op/s rd, 0 op/s wr
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/pool-create.sh list

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                         POOL LIST                                 â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  NAME                 ID    PGS    SIZE   APP
[0;36mâ•‘[0m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[0;36mâ•‘[0m  benchmark-pool       7     64     3      -
[0;36mâ•‘[0m  cephfs-data          6     64     3      cephfs
[0;36mâ•‘[0m  cephfs-metadata      5     32     3      cephfs
[0;36mâ•‘[0m  mypool               2     128    3      rbd
[0;36mâ•‘[0m  mypool-ec            3     64     3      -
[0;36mâ•‘[0m  production-pool      8     64     3      -
[0;36mâ•‘[0m  rbd-pool             4     64     3      rbd
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/rbd-manage.sh list rbd-pool

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    RBD IMAGES IN POOL: rbd-pool[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  myimage
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/cephfs-setup.sh list

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                       CEPHFS LIST                                 â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  NAME              METADATA POOL         DATA POOL
[0;36mâ•‘[0m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[0;36mâ•‘[0m  cephfs            cephfs-metadata       cephfs-metadata
cephfs-data
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/rgw-setup.sh user list

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                        RGW USERS                                  â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  - workshop
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


>>> /scripts/backup-restore.sh list

[0;36mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;36mâ•‘                    AVAILABLE BACKUPS                              â•‘[0m
[0;36mâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£[0m
[0;36mâ•‘[0m
[0;36mâ•‘[0m  ID                              TYPE     SIZE      STATUS
[0;36mâ•‘[0m  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[0;36mâ•‘[0m  config-20260105-141805            config   N/AMB     [0;32mcompleted[0m
[0;36mâ•‘[0m  pool-mypool-20260105-141807       pool     N/AMB     [0;32mcompleted[0m
[0;36mâ•‘[0m  rbd-production-pool-critical-db-20260105-141840 rbd      407MB     [0;32mcompleted[0m
[0;36mâ•‘[0m  rbd-rbd-pool-myimage-20260105-141814 rbd      552MB     [0;32mcompleted[0m
[0;36mâ•‘[0m
[0;36mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


==============================================================================
  FIN DU TEST COMPLET
  Date: Mon Jan  5 14:18:46 UTC 2026
==============================================================================
